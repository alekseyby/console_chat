# console_chat

Данное приложение состоит из серверной и клиентской части.

### Серверная часть

Серверная часть представлена файлом server.py

Для запуска сервера необходимо ввести дополнительные параметры (host, port):
```
python server.py --host localhost --port 12345
```
Если данные параметры не заданы, то устанавливаются значения по умолчанию: host = 127.0.0.1, port = 9009.
После успешного запуска серверной части будет выведено сообщение в следующем формате: 

`Listening for connections on HOST:PORT...`

Сервер выполняет следующие функции:
- Регистрация клиентов (возможна регистрация клиентов с одинаковыми именами)
- Отправка сообщений между клиентами
- Поддержка базовых команд по запросу клиента: узнать количество участников чата, узнать текущее время сервера, принять
 участие в игре "Камень, Ножницы, Бумага"
- Поддержка и обработка трех типов сообщений: system_message, message, command
- Закрытие сокета клиента при возникновении проблем со стороны клиента
- Закрытие сокета сервера при возникновении проблем

В процессе работы чата, на стороне сервера появляются следующие сообщения:
- `Accepted new connection from HOST:PORT, username: CLIENT_NAME` - после успешной регистрации клиента
- `Closed connection from: CLIENT_NAME` - в случае возникновения проблем с парсингом клиентского сообщения
- `The client CLIENT_NAME has requested the command: COMMAND` - в случае отправки клиентского сообщения с типом 'command'
- `Received message from CLIENT_NAME: MESSAGE` - в случае получения клиентского сообщения с типом 'message'

Реализована поддержка следующих команд:
- `cmd!participants_count` - возвращает пользователю количество участников чата
- `cmd!current_time` - возвращает пользователю текущее время
- `cmd!start_game:rock | scissors | paper` - начинает игру "Камень, Ножницы, Бумага":
- `cmd!client_exit` - удаляет клиента из чата и закрывает клиентский сокет в случае закрытия чата клиентом с помощью 
клавиш Ctrl + C.
- `cmd!error` -  удаляет клиента из чата и закрывает клиентский сокет в случае возниконовения ошибок на стороне клиента.

### Клиентская часть

Клиентская часть представлена файлом client.py

Для запуска клиента необходимо ввести дополнительные параметры: host, port:
```
python client.py --host localhost --port 12345
```

Если данные параметры не заданы, то устанавливаются значения по умолчанию: host = 127.0.0.1, port = 9009.
После успешного запуска клиентской части будет предложено ввести имя пользвоателя:`Username: CLIENT_NAME`

В противном случае:`Unable to connect`

Клиент выполняет следующие функции:
- Автоматическое обновление транскрипта чата
- Отправка и получение сообщений и команд на сервер
- Получшение и обработка сообщений от сервера
- Поддержка и обработка трех типов сообщений: system_message, message, command
- Закрытие сокета клиента при возникновении проблем

Для отправки команды клиент должен начинать сообщение с сочетания:`cmd!COMMAND`
